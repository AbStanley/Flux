/* Token Styles */
/* Token Styles */
.token {
    display: inline-block;
    border-radius: 0.375rem;
    cursor: default;
    transition: all 0.15s ease;
    padding: 0 0.1em;
    margin: 0;
    border-bottom: 2px solid transparent;
    /* Reserve space for underline */
}

.interactive {
    cursor: pointer;
}

/* .interactive:hover removed to rely on JS state */

.selected {
    background-color: transparent;
    border-bottom-color: hsl(var(--link-color));
    /* Just change color */
    color: hsl(var(--link-color));
    /* font-weight: 500; <-- REMOVED to prevent layout shift */
    vertical-align: baseline;
}

/* .selected.interactive:hover removed */

.hovered {
    background-color: hsl(var(--accent) / 0.5);
    border-radius: 0.25em;
}

/* Grouping Styles */
.start {
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
    /* margin-right: 0; */
    /* padding-right: 0; */
}

.middle {
    border-radius: 0;
    /* margin-left: 0;
    margin-right: 0;
    padding-left: 0;
    padding-right: 0; */
}

.end {
    border-top-left-radius: 0;
    border-bottom-left-radius: 0;
    /* margin-left: 0;
    padding-left: 0; */
}

/* Ensure selected items connect visually */
.selected.token {
    /* Remove default margin to allow connection */
    margin: 0;
}

/* Specific adjustments for the underline connection */
.selected.start {
    padding-right: 0;
    margin-right: 0;
}

.selected.middle {
    padding-left: 0;
    padding-right: 0;
    margin-left: 0;
    margin-right: 0;
}

.selected.end {
    padding-left: 0;
    margin-left: 0;
}

.selected.single,
.visualStart {
    margin-top: 0;
    /* Handled dynamically via JS or minimal default */
}

/* Hover States */
.hoveredSentence {
    background-color: hsl(var(--accent) / 0.3);
    border-radius: 0;
    transition: background-color 0.15s ease;
}

.selected.hoveredSentence {
    background-color: hsl(var(--accent) / 0.8);
    color: hsl(var(--accent-foreground));
    border-radius: 0.25rem;
    box-shadow: none;
}

/* Shape helpers overrides */
.selected.hoveredSentence.middle {
    border-radius: 0;
}

.selected.hoveredSentence.start {
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
}

.selected.hoveredSentence.end {
    border-top-left-radius: 0;
    border-bottom-left-radius: 0;
}

.hoveredWord {
    background-color: hsl(var(--accent) / 0.8) !important;
    box-shadow: 0 0 0 1px hsl(var(--accent));
    border-radius: 0.25em;
    z-index: 50;
    z-index: 50;
    position: relative;
}

.hoveredSelected {
    background-color: hsl(var(--link-color) / 0.1);
}

.zIndexTop {
    z-index: 60;
    position: relative;
}

.token:focus-within {
    z-index: 100;
    position: relative;
}

.audioHighlight {
    background-color: hsl(var(--primary));
    color: hsl(var(--primary-foreground));
    box-shadow: 0 0 10px hsl(var(--primary) / 0.5);
    border-radius: 0.25em;
    /* transform: scale(1.05); <-- REMOVED */
    z-index: 5;
    position: relative;
}